(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[868],{30594:function(e,t,r){Promise.resolve().then(r.bind(r,60428))},60428:function(e,t,r){"use strict";let l;r.r(t),r.d(t,{default:function(){return F}});var a,s=r(57437),i=r(2265),n=r(42097),o=r(94508),d=r(40257);let c=(e,t)=>{let r=t.find(t=>t.id===e.objectID);return(r||(r=t.find(t=>t.orderNumber.toLowerCase()===e.orderNumber.toLowerCase())),r||(r=t.find(t=>t.orderNumber.toLowerCase().includes(e.orderNumber.toLowerCase())||e.orderNumber.toLowerCase().includes(t.orderNumber.toLowerCase()))),r)?{...r,_highlightResult:e._highlightResult}:{id:e.objectID,orderNumber:e.orderNumber,customerName:e.customerName,customerEmail:e.customerEmail,phone:"+91 ".concat(Math.floor(9e9*Math.random())+1e9),total:Math.floor(1e3*Math.random())+100,status:"paid",fulfillmentStatus:"fulfilled",financialStatus:"paid",items:[{title:"Sample Product",quantity:Math.floor(5*Math.random())+1}],createdAt:new Date(e._timestamp).toISOString(),updatedAt:new Date(e._timestamp).toISOString(),tags:["featured","new"],channel:"Shopify",deliveryMethod:"Standard Shipping",deliveryStatus:"Tracking added",hasWarning:!1,hasDocument:!1,_highlightResult:e._highlightResult}},u=async(e,t)=>{if(!e.trim())return[];try{let r=d.env.NEXT_PUBLIC_BACKEND_URL||"http://52.5.157.232:5001",l=await fetch("".concat(r,"/search/query"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:"myProject",table:"shopify-inkhub-get-orders",query:e,hitsPerPage:20,page:0})});if(!l.ok)throw Error("Algolia search failed: ".concat(l.status));let a=await l.json();if(!a.hits||!Array.isArray(a.hits))return[];return a.hits.map(e=>c(e,t))}catch(e){return[]}},g=(a=async(e,t,r,l)=>{if(!e.trim()){r([]),l(!1);return}l(!0);try{let l=await u(e,t);r(l)}catch(e){r([])}finally{l(!1)}},function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];clearTimeout(l),l=setTimeout(()=>a(...t),300)}),m=(e,t,r)=>[{query:e.trim(),timestamp:Date.now(),resultCount:t},...r.filter(t=>t.query.toLowerCase()!==e.toLowerCase())].slice(0,20);var h=r(98728),x=r(99397),f=r(37421),v=r(38709),p=r(12032),b=r(80666);function y(e){let{kpiMetrics:t,orders:r,onRefresh:l,onConfigure:a}=e,[n,d]=(0,i.useState)([]),[c,u]=(0,i.useState)(!1),[g,m]=(0,i.useState)(!1),[y,S]=(0,i.useState)(!1),[N,w]=(0,i.useState)(null),[j,k]=(0,i.useState)(null),[C,O]=(0,i.useState)({totalOrders:!0,paidOrders:!0,pendingOrders:!0,fulfilledOrders:!0,totalValue:!0,avgOrderValue:!0}),[A,D]=(0,i.useState)({totalOrders:{refreshRate:30,alertThreshold:0,isVisible:!0,showTrend:!0,showPercentage:!0},paidOrders:{refreshRate:30,alertThreshold:0,isVisible:!0,showTrend:!0,showPercentage:!0},pendingOrders:{refreshRate:30,alertThreshold:0,isVisible:!0,showTrend:!0,showPercentage:!0},fulfilledOrders:{refreshRate:30,alertThreshold:0,isVisible:!0,showTrend:!0,showPercentage:!0},totalValue:{refreshRate:30,alertThreshold:0,isVisible:!0,showTrend:!0,showPercentage:!0},avgOrderValue:{refreshRate:30,alertThreshold:0,isVisible:!0,showTrend:!0,showPercentage:!0}});(0,i.useEffect)(()=>{let e=localStorage.getItem("shopify-orders-custom-cards"),t=localStorage.getItem("shopify-orders-default-card-visibility");if(e)try{d(JSON.parse(e))}catch(e){}if(t)try{O(JSON.parse(t))}catch(e){}},[]),(0,i.useEffect)(()=>{localStorage.setItem("shopify-orders-custom-cards",JSON.stringify(n))},[n]),(0,i.useEffect)(()=>{localStorage.setItem("shopify-orders-default-card-visibility",JSON.stringify(C))},[C]);let T=[{key:"totalOrders",label:t.totalOrders.label,metric:t.totalOrders.metric,gradient:"from-blue-500 to-blue-600",icon:t.totalOrders.icon,bgGradient:"from-blue-50 to-blue-100",isCurrency:!1},{key:"paidOrders",label:t.paidOrders.label,metric:t.paidOrders.metric,gradient:"from-green-500 to-green-600",icon:t.paidOrders.icon,bgGradient:"from-green-50 to-green-100",isCurrency:!1},{key:"pendingOrders",label:t.pendingOrders.label,metric:t.pendingOrders.metric,gradient:"from-yellow-500 to-yellow-600",icon:t.pendingOrders.icon,bgGradient:"from-yellow-50 to-yellow-100",isCurrency:!1},{key:"fulfilledOrders",label:t.fulfilledOrders.label,metric:t.fulfilledOrders.metric,gradient:"from-purple-500 to-purple-600",icon:t.fulfilledOrders.icon,bgGradient:"from-purple-50 to-purple-100",isCurrency:!1},{key:"totalValue",label:t.totalValue.label,metric:t.totalValue.metric,gradient:"from-indigo-500 to-indigo-600",icon:t.totalValue.icon,bgGradient:"from-indigo-50 to-indigo-100",isCurrency:!0},{key:"avgOrderValue",label:t.avgOrderValue.label,metric:t.avgOrderValue.metric,gradient:"from-orange-500 to-orange-600",icon:t.avgOrderValue.icon,bgGradient:"from-orange-50 to-orange-100",isCurrency:!0}],M=e=>{null==l||l(e)},E=(e,t)=>{D(r=>({...r,[e]:t})),null==a||a(e,t)},P=e=>{let t=r.filter(t=>e.selectedProducts.includes(t.id)).map(t=>{let r=t[e.field];return"number"==typeof r?r:0}).filter(e=>e>0);return(0,b.E)(t,e.operation,void 0,r.length)};return(0,s.jsxs)("div",{className:"px-3 py-0.5 bg-white shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Analytics Overview"}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["(",T.filter(e=>{var t;let{key:r}=e;return C[r]&&(null===(t=A[r])||void 0===t?void 0:t.isVisible)!==!1}).length+n.filter(e=>e.isVisible).length," cards)"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>m(!0),className:"flex items-center space-x-1 px-2 py-1 text-xs text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:[(0,s.jsx)(h.Z,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"Manage Cards"})]}),(0,s.jsxs)("button",{onClick:()=>u(!0),className:"flex items-center space-x-1 px-3 py-1 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors shadow-sm hover:shadow-md",children:[(0,s.jsx)(x.Z,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"Add Card"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-1",children:[T.filter(e=>{var t;let{key:r}=e;return C[r]&&(null===(t=A[r])||void 0===t?void 0:t.isVisible)!==!1}).map(e=>{let{key:t,label:r,metric:l,gradient:a,icon:i,bgGradient:n,isCurrency:o}=e;return(0,s.jsx)(f.Z,{label:r,metric:l,gradient:a,icon:i,bgGradient:n,isCurrency:o,config:A[t],onRefresh:()=>M(t),onConfigure:e=>E(t,e)},t)}),n.filter(e=>e.isVisible).map(e=>{let t=P(e);return"total"===e.field||e.field,(0,s.jsxs)("div",{className:(0,o.cn)("bg-white border border-gray-200 rounded-lg p-2 hover:shadow-md transition-all duration-200 group","relative overflow-visible"),children:[(0,s.jsx)("div",{className:(0,o.cn)("absolute inset-0 opacity-5 group-hover:opacity-10 transition-opacity duration-200 rounded-lg","bg-gradient-to-r ".concat(e.color))}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[(0,s.jsx)("span",{className:"text-base flex-shrink-0",children:e.icon}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-600 truncate",children:e.title})]}),(0,s.jsx)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full opacity-60"})})]}),(0,s.jsx)("div",{className:(0,o.cn)("text-lg font-bold",e.color),children:(0,b.P)(t,e.field)}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.operation," of ",e.field," (",e.selectedProducts.length," orders)"]})]})]},e.id)})]}),(0,s.jsx)(v.Z,{isOpen:c,onClose:()=>{u(!1),w(null),k(null)},onSave:e=>{N?(d(t=>t.map(t=>t.id===N.id?e:t)),w(null)):(d(t=>[...t,e]),S(!0),m(!0))},products:r,existingCards:n,editingCard:N,editingDefaultCard:j}),(0,s.jsx)(p.Z,{isOpen:g,onClose:()=>{m(!1),S(!1)},customCards:n,defaultCards:Object.entries(C).map(e=>{var t;let[r,l]=e;return{key:r,label:(null===(t=T.find(e=>e.key===r))||void 0===t?void 0:t.label)||r,isVisible:l}}),onUpdateCustomCard:(e,t)=>{d(r=>r.map(r=>r.id===e?{...r,...t}:r))},onUpdateDefaultCard:(e,t)=>{O(r=>({...r,[e]:t}))},onDeleteCustomCard:e=>{d(t=>t.filter(t=>t.id!==e))},onEditCustomCard:e=>{w(e),u(!0),m(!1)},onEditDefaultCard:e=>{k(e),u(!0),m(!1)},defaultActiveTab:y?"custom":"default"})]})}function S(e){let{column:t,title:r,filterType:l,options:a=[],value:n,onChange:o,onClose:d,position:c,getUniqueValues:u}=e,g=(0,i.useRef)(null),m=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&d()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[d]),(0,i.useEffect)(()=>{m.current&&"text"===l&&m.current.focus()},[l]);let h=()=>(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsx)("input",{ref:m,type:"text",placeholder:"Filter ".concat(r.toLowerCase(),"..."),value:n||"",onChange:e=>o(e.target.value),className:"w-full text-sm border border-gray-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white focus:bg-white text-black"})}),x=()=>(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsxs)("select",{value:n||"",onChange:e=>o(e.target.value),className:"w-full text-sm border border-gray-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white focus:bg-white text-black",children:[(0,s.jsxs)("option",{value:"",children:["All ",r]}),a.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})}),f=()=>(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsx)("select",{multiple:!0,value:Array.isArray(n)?n:[],onChange:e=>{o(Array.from(e.target.selectedOptions,e=>e.value))},className:"w-full text-sm border border-gray-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white focus:bg-white min-h-[80px] text-black",children:a.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})}),v=()=>(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-black mb-2",children:"FILTER OPTIONS:"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("button",{onClick:()=>o(">1000"),className:"text-sm px-3 py-2 bg-gradient-to-r from-gray-50 to-gray-100 hover:from-blue-50 hover:to-indigo-50 rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 hover:shadow-sm text-black",children:">1000"}),(0,s.jsx)("button",{onClick:()=>o(">5000"),className:"text-sm px-3 py-2 bg-gradient-to-r from-gray-50 to-gray-100 hover:from-blue-50 hover:to-indigo-50 rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 hover:shadow-sm text-black",children:">5000"}),(0,s.jsx)("button",{onClick:()=>o("<1000"),className:"text-sm px-3 py-2 bg-gradient-to-r from-gray-50 to-gray-100 hover:from-blue-50 hover:to-indigo-50 rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 hover:shadow-sm text-black",children:"<1000"}),(0,s.jsx)("button",{onClick:()=>o("<5000"),className:"text-sm px-3 py-2 bg-gradient-to-r from-gray-50 to-gray-100 hover:from-blue-50 hover:to-indigo-50 rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 hover:shadow-sm text-black",children:"<5000"})]}),(0,s.jsx)("input",{type:"text",placeholder:"Custom filter (e.g., >1000, <5000, =2000)",value:n||"",onChange:e=>o(e.target.value),className:"w-full text-sm border border-gray-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white focus:bg-white text-black"})]}),p=()=>(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-black mb-2",children:"FILTER OPTIONS:"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("button",{onClick:()=>{o(new Date().toISOString().split("T")[0])},className:"text-sm px-3 py-2 bg-gradient-to-r from-gray-50 to-gray-100 hover:from-blue-50 hover:to-indigo-50 rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 hover:shadow-sm text-black",children:"Today"}),(0,s.jsx)("button",{onClick:()=>{o(new Date(Date.now()-864e5).toISOString().split("T")[0])},className:"text-sm px-3 py-2 bg-gradient-to-r from-gray-50 to-gray-100 hover:from-blue-50 hover:to-indigo-50 rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 hover:shadow-sm text-black",children:"Yesterday"}),(0,s.jsx)("button",{onClick:()=>{o(new Date(Date.now()-6048e5).toISOString().split("T")[0])},className:"text-sm px-3 py-2 bg-gradient-to-r from-gray-50 to-gray-100 hover:from-blue-50 hover:to-indigo-50 rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 hover:shadow-sm text-black",children:"Last Week"}),(0,s.jsx)("button",{onClick:()=>{o(new Date(Date.now()-2592e6).toISOString().split("T")[0])},className:"text-sm px-3 py-2 bg-gradient-to-r from-gray-50 to-gray-100 hover:from-blue-50 hover:to-indigo-50 rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 hover:shadow-sm text-black",children:"Last Month"}),(0,s.jsx)("button",{onClick:()=>{o(new Date().getFullYear().toString()+"-01-01")},className:"text-sm px-3 py-2 bg-gradient-to-r from-gray-50 to-gray-100 hover:from-blue-50 hover:to-indigo-50 rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 hover:shadow-sm text-black",children:"This Year"}),(0,s.jsx)("button",{onClick:()=>{o((new Date().getFullYear()-1).toString()+"-01-01")},className:"text-sm px-3 py-2 bg-gradient-to-r from-gray-50 to-gray-100 hover:from-blue-50 hover:to-indigo-50 rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 hover:shadow-sm text-black",children:"Last Year"})]}),(0,s.jsx)("input",{type:"date",value:n||"",onChange:e=>o(e.target.value),className:"w-full text-sm border border-gray-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white focus:bg-white text-black"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Format: YYYY-MM-DD (e.g., 2024-06-11)"})]});return(0,s.jsx)("div",{ref:g,className:"fixed bg-white border border-gray-200 rounded-xl shadow-xl backdrop-blur-sm z-[999999]",style:{left:c.x,top:c.y,minWidth:"220px",maxWidth:"320px",maxHeight:"320px",overflowY:"auto",transform:"translateZ(0)",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.08), 0 10px 10px -5px rgba(0, 0, 0, 0.04), 0 0 0 1px rgba(255, 255, 255, 0.05)"},children:(0,s.jsxs)("div",{className:"p-4",children:[(()=>{switch(l){case"text":default:return h();case"select":return x();case"multi-select":return f();case"numeric":return v();case"date":return p()}})(),(0,s.jsx)("div",{className:"mt-4 pt-3 border-t border-gray-100",children:(0,s.jsx)("button",{onClick:()=>{"multi-select"===l?o([]):o(""),d()},className:"text-sm text-black hover:text-gray-700 hover:bg-gray-50 px-2 py-1 rounded-md transition-all duration-200",children:"Clear"})})]})})}function N(e){var t;let{currentOrders:r,selectedItems:l,onSelectItem:a,onSelectAll:n,columns:o,loading:d=!1,error:c=null,searchQuery:u="",isFullScreen:g=!1,activeColumnFilter:m,columnFilters:h={},onFilterClick:x,onColumnFilterChange:f,getUniqueValues:v,showImages:p=!1}=e,[b,y]=(0,i.useState)(null),[N,w]=(0,i.useState)("asc"),[j,k]=(0,i.useState)(null),C=(0,i.useMemo)(()=>b?[...r].sort((e,t)=>{let r=e[b],l=t[b];if(null==r)return 1;if(null==l)return -1;let a=0;return a="string"==typeof r&&"string"==typeof l?r.localeCompare(l):"number"==typeof r&&"number"==typeof l?r-l:String(r).localeCompare(String(l)),"asc"===N?a:-a}):r,[r,b,N]),O=e=>{b===e?w("asc"===N?"desc":"asc"):(y(e),w("asc"))},A=(e,t)=>{if(t.stopPropagation(),(null==j?void 0:j.column)===e){k(null),null==x||x(null);return}let r=t.currentTarget.getBoundingClientRect(),l={x:r.right+5,y:r.bottom+5},a=window.innerWidth,s=window.innerHeight;l.x+250>a&&(l.x=r.left-250-5),l.y+320>s&&(l.y=r.top-320-5),k({column:e,position:l}),null==x||x(e)},D=(e,t)=>{null==f||f(e,t)},T=e=>{switch(e){case"orderNumber":case"customerName":case"items":default:return{filterType:"text"};case"fulfillmentStatus":return{filterType:"select",options:["unfulfilled","fulfilled","partial"]};case"total":return{filterType:"numeric"};case"createdAt":return{filterType:"date"};case"deliveryStatus":return{filterType:"select",options:["Tracking added","Pending","In Transit","Delivered"]};case"tags":return{filterType:"multi-select",options:v?v("tags"):[]};case"channel":return{filterType:"select",options:v?v("channel"):[]};case"deliveryMethod":return{filterType:"select",options:v?v("deliveryMethod"):[]};case"paymentStatus":return{filterType:"select",options:["paid","pending","refunded"]}}},M=r.length>0&&l.length===r.length,E=l.length>0&&l.length<r.length;return d?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"text-gray-500",children:"Loading orders..."})}):c?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"text-red-500",children:["Error: ",c]})}):0===r.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"text-gray-500",children:"No orders found"})}):(0,s.jsxs)("div",{className:"bg-white rounded-lg border ".concat(g?"fixed inset-0 z-50 overflow-auto":""),children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:(0,s.jsx)("input",{type:"checkbox",checked:M,ref:e=>{e&&(e.indeterminate=E)},onChange:n,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),o.map(e=>(0,s.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-gray-200 relative",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:e.label}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[e.sortable&&(0,s.jsx)("button",{onClick:()=>O(e.key),className:"p-1 rounded-md transition-all duration-200 hover:scale-105 text-gray-400 hover:text-gray-600 hover:bg-gray-50",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{className:"w-0 h-0 border-l-3 border-r-3 border-b-3 border-transparent ".concat(b===e.key&&"asc"===N?"border-b-gray-400":"border-b-gray-300")}),(0,s.jsx)("div",{className:"w-0 h-0 border-l-3 border-r-3 border-t-3 border-transparent ".concat(b===e.key&&"desc"===N?"border-t-gray-400":"border-t-gray-300")})]})}),(0,s.jsx)("button",{onClick:t=>A(e.key,t),className:"p-1 rounded-md transition-all duration-200 hover:scale-105 ".concat(m===e.key||(null==j?void 0:j.column)===e.key?"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-600 shadow-sm border border-blue-200":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"),children:(0,s.jsx)("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})})})]})]})},e.key))]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>a(e.id),children:[(0,s.jsx)("td",{className:"px-2 py-1.5",children:(0,s.jsx)("input",{type:"checkbox",checked:l.includes(e.id),onChange:()=>a(e.id),onClick:e=>e.stopPropagation(),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),o.map(t=>(0,s.jsx)("td",{className:"px-2 py-1.5 text-sm text-gray-900 border-r border-gray-200",children:t.render?t.render(e):String(e[t.key]||"")},t.key))]},e.id))})]})}),j&&(0,s.jsx)(S,{column:j.column,title:(null===(t=o.find(e=>e.key===j.column))||void 0===t?void 0:t.label)||j.column,filterType:T(j.column).filterType,options:T(j.column).options,value:h[j.column],onChange:e=>D(j.column,e),onClose:()=>{k(null),null==x||x(null)},position:j.position,getUniqueValues:v})]})}var w=r(56424);function j(e){let{data:t,columns:r,selectedItems:l,onSelectItem:a,viewMode:n,cardsPerRow:o,onCardsPerRowChange:d,loading:c=!1,error:u=null,searchQuery:g="",isFullScreen:m=!1}=e,[h,x]=(0,i.useState)(null);return c?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"text-gray-500",children:"Loading orders..."})}):u?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"text-red-500",children:["Error: ",u]})}):0===t.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"text-gray-500",children:"No orders found"})}):(0,s.jsx)("div",{className:"".concat(m?"fixed inset-0 z-50 overflow-auto":""),children:(0,s.jsx)("div",{className:"grid ".concat({1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",5:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",6:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6"}[o]," gap-4"),children:t.map(e=>{var t,r;return(0,s.jsxs)("div",{className:"bg-white border rounded-lg p-4 cursor-pointer transition-all duration-200 ".concat(h===e.id?"shadow-lg border-blue-300":"border-gray-200 hover:border-gray-300"),onMouseEnter:()=>x(e.id),onMouseLeave:()=>x(null),onClick:()=>a(e.id),children:[(0,s.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:l.includes(e.id),onChange:()=>a(e.id),onClick:e=>e.stopPropagation(),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["#",e.orderNumber]}),e.hasWarning&&(0,s.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xs text-white",children:"!"})}),e.hasDocument&&(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xs text-white",children:"D"})})]})]})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customerName}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.customerEmail})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Status:"}),(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat("fulfilled"===e.fulfillmentStatus?"bg-green-100 text-green-800":"unfulfilled"===e.fulfillmentStatus?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.fulfillmentStatus})]}),(0,s.jsxs)("span",{className:"text-sm font-medium text-green-600",children:["₹",(e.total||0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[(null===(t=e.items)||void 0===t?void 0:t.length)||0," item",1!==((null===(r=e.items)||void 0===r?void 0:r.length)||0)?"s":""]}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.createdAt?(0,w.WU)(new Date(e.createdAt),"MMM dd, yyyy"):"No date"}),e.tags&&e.tags.length>0&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,2).map((e,t)=>(0,s.jsx)("span",{className:"px-1 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:e},t)),e.tags.length>2&&(0,s.jsxs)("span",{className:"px-1 py-0.5 bg-gray-100 text-gray-700 text-xs rounded",children:["+",e.tags.length-2]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,s.jsx)("div",{children:e.channel}),(0,s.jsx)("div",{children:e.deliveryMethod})]})]})]},e.id)})})})}var k=r(53412),C=r(74482),O=r(93249),A=r(66664);let D=e=>{let t=["paid","unpaid","refunded","pending","processing","shipped","delivered","cancelled"],r=["unfulfilled","fulfilled","partial"],l=["paid","pending","refunded"],a=["Gokwik","Interakt - Sell on WhatsApp","Shopify","Manual"],s=["Free Shipping","Standard Shipping","Express Free Shipping","Express Shipping"],i=["bank-offer","GoKwik","UPI","Cards","COD","premium","influencer","custom","color-issue"],n=["Rahul Sharma","Priya Patel","Amit Kumar","Neha Singh","Vikram Malhotra","Anjali Gupta","Rajesh Verma","Sneha Reddy","Arjun Kapoor","Meera Iyer","Karan Johar","Zara Khan","Aditya Roy","Ishita Sharma","Rohan Mehta","Tanvi Desai","Vivek Oberoi","Kavya Nair","Siddharth Malhotra","Ananya Pandey"],o=["Sacred Mandala Tattoo","Mahadev Tattoo Design","11:11 Manifestation Tattoo","Beyond Death Tattoo","Shooting Stars Tattoo","Mother's Garden Tattoo","Equilibrium Tattoo","Angry Tiger Tattoo","Mirror Ball Tattoo","Diva Energy Tattoo Pack","Monarch Butterfly Tattoo","Midnight Wolf Tattoo","Karma Maze Armband Tattoo","Sinister Mask Tattoo","KALKI Forward Tattoo"];return Array.from({length:e},(e,d)=>{let c=d+1,u=Math.floor(5e3*Math.random())+100,g=c%t.length,m=c%r.length,h=c%l.length,x=c%a.length,f=c%s.length,v=n[c%n.length],p=v.toLowerCase().replace(" ",".")+"@example.com",b=o[c%o.length],y=o[(c+1)%o.length],S=Math.floor(3*Math.random())+1,N=Math.floor(2*Math.random())+1,w=Math.floor(365*Math.random())+1,j=new Date(Date.now()-864e5*w).toISOString(),k=new Date(Date.now()-864e5*Math.floor(Math.random()*w)).toISOString(),C=[];return c%3==0&&C.push(i[c%i.length]),c%5==0&&C.push(i[(c+1)%i.length]),c%7==0&&C.push(i[(c+2)%i.length]),{id:"order-".concat(d+1),orderNumber:"INK".concat(String(64800+d).padStart(5,"0")),customerName:v,customerEmail:p,phone:"+91 ".concat(Math.floor(9e9*Math.random())+1e9),total:u,status:t[g],fulfillmentStatus:r[m],financialStatus:l[h],items:[{title:b,quantity:S},{title:y,quantity:N}],line_items:[{title:b,quantity:S},{title:y,quantity:N}],createdAt:j,updatedAt:k,totalPrice:u.toFixed(2),tags:C.length>0?C:[i[c%i.length]],channel:a[x],deliveryMethod:s[f],deliveryStatus:"fulfilled"===r[m]?"Tracking added":"",hasWarning:c%7==0,hasDocument:c%11==0}})},T=r(40257).env.NEXT_PUBLIC_BACKEND_URL||"https://brmh.in",M=e=>{if(!e)return new Date().toISOString();try{return new Date(e).toISOString()}catch(e){return new Date().toISOString()}},E=(e,t)=>{var r,l,a,s,i,n,o,d,c,u,g,m,h,x,f,v,p,b,y,S,N,w,j,k,C,O,A,D,T,E,P,_,F,I,R,L,V,B,U,q,W,z,K,J,G,Z,Y,H,Q,X,$,ee,et,er,el,ea,es,ei,en,eo,ed,ec,eu,eg,em,eh,ex,ef,ev,ep;let eb=String(null!==(O=null!==(C=null!==(k=null==e?void 0:e.order_number)&&void 0!==k?k:null==e?void 0:e.orderNumber)&&void 0!==C?C:null==e?void 0:e.name)&&void 0!==O?O:"#INK".concat(Math.floor(9e4*Math.random())+1e4)),ey=String(null!==(E=null!==(T=null!==(D=null!==(A=null==e?void 0:null===(r=e.customer)||void 0===r?void 0:r.first_name)&&void 0!==A?A:null==e?void 0:null===(l=e.customer)||void 0===l?void 0:l.last_name)&&void 0!==D?D:null==e?void 0:e.customer_name)&&void 0!==T?T:null==e?void 0:e.customerName)&&void 0!==E?E:"Customer ".concat(t+1)),eS=String(null!==(F=null!==(_=null!==(P=null==e?void 0:null===(a=e.customer)||void 0===a?void 0:a.email)&&void 0!==P?P:null==e?void 0:e.customer_email)&&void 0!==_?_:null==e?void 0:e.customerEmail)&&void 0!==F?F:"customer".concat(t+1,"@example.com")),eN=String(null!==(R=null!==(I=null==e?void 0:e.financial_status)&&void 0!==I?I:null==e?void 0:e.financialStatus)&&void 0!==R?R:"pending").toLowerCase(),ew=String(null!==(V=null!==(L=null==e?void 0:e.fulfillment_status)&&void 0!==L?L:null==e?void 0:e.fulfillmentStatus)&&void 0!==V?V:"unfulfilled").toLowerCase(),ej=Number(null!==(q=null!==(U=null!==(B=null==e?void 0:e.total_price)&&void 0!==B?B:null==e?void 0:e.totalPrice)&&void 0!==U?U:null==e?void 0:e.total)&&void 0!==q?q:0)||0,ek=Array.isArray(null==e?void 0:e.line_items)?e.line_items.length:1,eC=Array.isArray(null==e?void 0:e.tags)?e.tags:"string"==typeof(null==e?void 0:e.tags)?e.tags.split(",").map(e=>e.trim()).filter(Boolean):[],eO=String(null!==(K=null!==(z=null!==(W=null==e?void 0:e.source_name)&&void 0!==W?W:null==e?void 0:e.sourceName)&&void 0!==z?z:null==e?void 0:e.channel)&&void 0!==K?K:"Shopify"),eA=String(null!==(Z=null!==(G=null!==(J=null==e?void 0:null===(i=e.shipping_lines)||void 0===i?void 0:null===(s=i[0])||void 0===s?void 0:s.title)&&void 0!==J?J:null==e?void 0:e.delivery_method)&&void 0!==G?G:null==e?void 0:e.deliveryMethod)&&void 0!==Z?Z:"Standard Shipping");return{id:String(null!==(Q=null!==(H=null!==(Y=null==e?void 0:e.id)&&void 0!==Y?Y:null==e?void 0:e.order_id)&&void 0!==H?H:null==e?void 0:e.gid)&&void 0!==Q?Q:"order-".concat(Date.now(),"-").concat(t)),orderNumber:eb,customerName:ey,customerEmail:eS,status:eN,fulfillmentStatus:ew,financialStatus:eN,total:ej,currency:String(null!==(X=null==e?void 0:e.currency)&&void 0!==X?X:"INR"),items:ek,deliveryStatus:"fulfilled"===ew?"Tracking added":"Pending",tags:eC,channel:eO,deliveryMethod:eA,paymentStatus:eN,createdAt:M(null!==($=null==e?void 0:e.created_at)&&void 0!==$?$:null==e?void 0:e.createdAt),updatedAt:M(null!==(ee=null==e?void 0:e.updated_at)&&void 0!==ee?ee:null==e?void 0:e.updatedAt),lineItems:Array.isArray(null==e?void 0:e.line_items)?e.line_items.map(e=>{var r,l,a,s,i,n,o,d;return{id:String(null!==(r=null==e?void 0:e.id)&&void 0!==r?r:"item-".concat(Date.now(),"-").concat(t)),title:String(null!==(a=null!==(l=null==e?void 0:e.title)&&void 0!==l?l:null==e?void 0:e.name)&&void 0!==a?a:"Unknown Product"),quantity:Number(null!==(s=null==e?void 0:e.quantity)&&void 0!==s?s:1),price:Number(null!==(i=null==e?void 0:e.price)&&void 0!==i?i:0),sku:String(null!==(n=null==e?void 0:e.sku)&&void 0!==n?n:""),variantId:String(null!==(d=null!==(o=null==e?void 0:e.variant_id)&&void 0!==o?o:null==e?void 0:e.variantId)&&void 0!==d?d:"")}}):[],shippingAddress:(null==e?void 0:e.shipping_address)?{firstName:String(null!==(et=null===(n=e.shipping_address)||void 0===n?void 0:n.first_name)&&void 0!==et?et:""),lastName:String(null!==(er=null===(o=e.shipping_address)||void 0===o?void 0:o.last_name)&&void 0!==er?er:""),address1:String(null!==(el=null===(d=e.shipping_address)||void 0===d?void 0:d.address1)&&void 0!==el?el:""),address2:String(null!==(ea=null===(c=e.shipping_address)||void 0===c?void 0:c.address2)&&void 0!==ea?ea:""),city:String(null!==(es=null===(u=e.shipping_address)||void 0===u?void 0:u.city)&&void 0!==es?es:""),province:String(null!==(ei=null===(g=e.shipping_address)||void 0===g?void 0:g.province)&&void 0!==ei?ei:""),country:String(null!==(en=null===(m=e.shipping_address)||void 0===m?void 0:m.country)&&void 0!==en?en:""),zip:String(null!==(eo=null===(h=e.shipping_address)||void 0===h?void 0:h.zip)&&void 0!==eo?eo:""),phone:String(null!==(ed=null===(x=e.shipping_address)||void 0===x?void 0:x.phone)&&void 0!==ed?ed:"")}:void 0,billingAddress:(null==e?void 0:e.billing_address)?{firstName:String(null!==(ec=null===(f=e.billing_address)||void 0===f?void 0:f.first_name)&&void 0!==ec?ec:""),lastName:String(null!==(eu=null===(v=e.billing_address)||void 0===v?void 0:v.last_name)&&void 0!==eu?eu:""),address1:String(null!==(eg=null===(p=e.billing_address)||void 0===p?void 0:p.address1)&&void 0!==eg?eg:""),address2:String(null!==(em=null===(b=e.billing_address)||void 0===b?void 0:b.address2)&&void 0!==em?em:""),city:String(null!==(eh=null===(y=e.billing_address)||void 0===y?void 0:y.city)&&void 0!==eh?eh:""),province:String(null!==(ex=null===(S=e.billing_address)||void 0===S?void 0:S.province)&&void 0!==ex?ex:""),country:String(null!==(ef=null===(N=e.billing_address)||void 0===N?void 0:N.country)&&void 0!==ef?ef:""),zip:String(null!==(ev=null===(w=e.billing_address)||void 0===w?void 0:w.zip)&&void 0!==ev?ev:""),phone:String(null!==(ep=null===(j=e.billing_address)||void 0===j?void 0:j.phone)&&void 0!==ep?ep:"")}:void 0}},P=async()=>{try{let e=await fetch("".concat(T,"/cache/data?project=my-app&table=shopify-inkhub-get-orders"));if(!e.ok)throw Error("Cache API error (".concat(e.status,"): ").concat(e.statusText));let t=await e.json();if(!(null==t?void 0:t.keys)||!Array.isArray(t.keys))throw Error("No chunk keys found");let r=[],l=0;for(let e of t.keys){let t=e.split(":").pop(),a="".concat(T,"/cache/data?project=my-app&table=shopify-inkhub-get-orders&key=chunk:").concat(t),s=await fetch(a);if(s.ok){let e=await s.json();if((null==e?void 0:e.data)&&Array.isArray(e.data)){let t=e.data.map(E);r.push(...t),l+=t.length}}}if(0===l)throw Error("No order data found in chunks");return r}catch(r){var e,t;if((null==r?void 0:r.name)==="AbortError")throw r;if((null==r?void 0:null===(e=r.message)||void 0===e?void 0:e.includes("Failed to fetch"))||(null==r?void 0:null===(t=r.message)||void 0===t?void 0:t.includes("ERR_CONNECTION_REFUSED")))throw Error("Backend connection failed");throw r}};function _(e){let{initialData:t}=e,{addTab:r,tabs:l}=(0,n.q)(),[a,d]=(0,i.useState)([]),[c,u]=(0,i.useState)({}),[h,x]=(0,i.useState)([]),[f,v]=(0,i.useState)(!1),[p,b]=(0,i.useState)(!1),[S,w]=(0,i.useState)(null),[T,M]=(0,i.useState)(0),[E,_]=(0,i.useState)("all"),[F,I]=(0,i.useState)(""),[R,L]=(0,i.useState)(""),[V,B]=(0,i.useState)([]),[U,q]=(0,i.useState)(!1),[W,z]=(0,i.useState)([]),[K,J]=(0,i.useState)([]),[G,Z]=(0,i.useState)(!1),[Y,H]=(0,i.useState)(!1),[Q,X]=(0,i.useState)([]),[$,ee]=(0,i.useState)([]),[et,er]=(0,i.useState)(!1),[el,ea]=(0,i.useState)(!1),[es,ei]=(0,i.useState)({orderStatus:[],priceRange:{min:"",max:""},dateRange:{start:"",end:""},tags:[],channels:[]}),[en,eo]=(0,i.useState)({orderNumber:"",customerName:"",status:[],fulfillmentStatus:[],financialStatus:[],channel:[],deliveryMethod:[],tags:[],total:"",createdAt:"",updatedAt:""}),[ed,ec]=(0,i.useState)(null),[eu,eg]=(0,i.useState)(!1),[em,eh]=(0,i.useState)([]),[ex,ef]=(0,i.useState)(new Set),[ev,ep]=(0,i.useState)("table"),[eb,ey]=(0,i.useState)(!1),[eS,eN]=(0,i.useState)(!1),[ew,ej]=(0,i.useState)(!1),[ek,eC]=(0,i.useState)(!1),[eO,eA]=(0,i.useState)(!1),[eD,eT]=(0,i.useState)(!1),[eM,eE]=(0,i.useState)(!1),[eP,e_]=(0,i.useState)(!1),[eF,eI]=(0,i.useState)(!1),[eR,eL]=(0,i.useState)(!1),[eV,eB]=(0,i.useState)(1),[eU,eq]=(0,i.useState)(25),[eW,ez]=(0,i.useState)(()=>{{let e=localStorage.getItem("orders-cards-per-row");return e?parseInt(e,10):4}}),[eK,eJ]=(0,i.useState)(()=>{{let e=localStorage.getItem("orders-settings");return e?JSON.parse(e):{defaultViewMode:"table",itemsPerPage:25,showAdvancedFilters:!0,autoSaveFilters:!1,defaultExportFormat:"csv",includeImagesInExport:!1,showImages:!0}}});(0,i.useEffect)(()=>{localStorage.setItem("orders-settings",JSON.stringify(eK))},[eK]),(0,i.useEffect)(()=>{eK.defaultViewMode&&eK.defaultViewMode!==ev&&ep(eK.defaultViewMode)},[eK.defaultViewMode]),(0,i.useEffect)(()=>{eK.itemsPerPage&&eK.itemsPerPage!==eU&&eq(eK.itemsPerPage)},[eK.itemsPerPage]),(0,i.useEffect)(()=>{eK.showAdvancedFilters!==el&&ea(eK.showAdvancedFilters)},[eK.showAdvancedFilters]),(0,i.useEffect)(()=>{if(eK.autoSaveFilters){let e={activeFilter:E,columnFilters:en,advancedFilters:es,customFilters:em,searchConditions:V,timestamp:Date.now()};localStorage.setItem("orders-saved-filters",JSON.stringify(e))}},[eK.autoSaveFilters,E,en,es,em,V]),(0,i.useEffect)(()=>{if(eK.autoSaveFilters){let e=localStorage.getItem("orders-saved-filters");if(e)try{let t=JSON.parse(e);Date.now()-t.timestamp<864e5&&(_(t.activeFilter||"all"),eo(t.columnFilters||{}),ei(t.advancedFilters||{}),eh(t.customFilters||[]),B(t.searchConditions||[]))}catch(e){}}},[eK.autoSaveFilters]),(0,i.useEffect)(()=>{let e=localStorage.getItem("orders-search-history");if(e)try{X(JSON.parse(e))}catch(e){}},[]),(0,i.useEffect)(()=>{(async()=>{b(!0),w(null);try{let e=await P();d(e),M(e.length),v(!0)}catch(t){w("Failed to fetch orders from server. Using dummy data as fallback.");let e=D(100);d(e),M(e.length),v(!0)}finally{b(!1)}})()},[]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{L(F)},300);return()=>{clearTimeout(e)}},[F]),(0,i.useEffect)(()=>{R&&Y?g(R,a,J,Z):J([])},[R,Y,a]);let eG=(0,i.useRef)(!1);(0,i.useEffect)(()=>{eG.current||(r({title:"Orders",path:"/apps/shopify/orders",pinned:!1,closable:!0}),eG.current=!0)},[r]);let eZ=(0,i.useMemo)(()=>{let e=a;if(R){let t=R.toLowerCase();e=e.filter(e=>e.orderNumber.toLowerCase().includes(t)||e.customerName.toLowerCase().includes(t)||e.customerEmail.toLowerCase().includes(t)||e.status.toLowerCase().includes(t)||(e.channel||"").toLowerCase().includes(t))}return Object.entries(en).forEach(t=>{let[r,l]=t;l&&(Array.isArray(l)?l.length>0:""!==l)&&(e=e.filter(e=>{let t=e[r];if(Array.isArray(l)){if("tags"===r){var a;return null===(a=e.tags)||void 0===a?void 0:a.some(e=>l.includes(e))}return l.includes(String(t))}if("total"===r&&"string"==typeof l){let t=e.total||0;if(l.startsWith(">"))return t>parseFloat(l.substring(1));if(l.startsWith("<"))return t<parseFloat(l.substring(1));if(l.startsWith("="))return t===parseFloat(l.substring(1))}if("createdAt"===r&&"string"==typeof l){let t=new Date(e.createdAt),r=new Date(l);return t.toDateString()===r.toDateString()}return String(t).toLowerCase().includes(String(l).toLowerCase())}))}),es.orderStatus.length>0&&(e=e.filter(e=>es.orderStatus.includes(e.status))),(es.priceRange.min||es.priceRange.max)&&(e=e.filter(e=>{let t=e.total||0,r=es.priceRange.min?parseFloat(es.priceRange.min):0,l=es.priceRange.max?parseFloat(es.priceRange.max):1/0;return t>=r&&t<=l})),(es.dateRange.start||es.dateRange.end)&&(e=e.filter(e=>{let t=new Date(e.createdAt),r=new Date(es.dateRange.start?es.dateRange.start:0),l=es.dateRange.end?new Date(es.dateRange.end):new Date;return t>=r&&t<=l})),es.tags.length>0&&(e=e.filter(e=>{var t;return null===(t=e.tags)||void 0===t?void 0:t.some(e=>es.tags.includes(e))})),es.channels.length>0&&(e=e.filter(e=>e.channel&&es.channels.includes(e.channel))),e},[a,R,en,es]),eY=Math.ceil(eZ.length/eU),eH=(eV-1)*eU,eQ=eZ.slice(eH,eH+eU),eX=(0,i.useMemo)(()=>{let e=eZ.length,t=eZ.filter(e=>"paid"===e.financialStatus).length,r=eZ.filter(e=>"pending"===e.financialStatus).length,l=eZ.filter(e=>"fulfilled"===e.fulfillmentStatus).length,a=eZ.reduce((e,t)=>e+(t.total||0),0);return{totalOrders:{label:"Total Orders",metric:{value:e,change:6,trend:"up"},icon:"\uD83D\uDCE6",color:"blue"},paidOrders:{label:"Paid Orders",metric:{value:t,change:11,trend:"up"},icon:"\uD83D\uDCB0",color:"green"},pendingOrders:{label:"Pending Orders",metric:{value:r,change:0,trend:"neutral"},icon:"⏳",color:"yellow"},fulfilledOrders:{label:"Fulfilled Orders",metric:{value:l,change:7,trend:"up"},icon:"✅",color:"purple"},totalValue:{label:"Total Value",metric:{value:a,change:14,trend:"up"},icon:"\uD83D\uDC8E",color:"indigo"},avgOrderValue:{label:"Avg Order Value",metric:{value:e>0?a/e:0,change:3.31,trend:"up"},icon:"\uD83D\uDCCA",color:"orange"}}},[eZ]),e$=(0,i.useCallback)(e=>{z(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),e0=(0,i.useCallback)(e=>{let t=new Set;return a.forEach(r=>{let l=r[e];null!=l&&(Array.isArray(l)?l.forEach(e=>t.add(String(e))):t.add(String(l)))}),Array.from(t).sort()},[a]),e1=(0,i.useCallback)(()=>{W.length===eQ.length?z([]):z(eQ.map(e=>e.id))},[W.length,eQ]),e2=(0,i.useCallback)(e=>{eB(e)},[]),e5=(0,i.useCallback)(e=>{eq(e),eB(1)},[]);(0,i.useCallback)(e=>{if(I(e),e.trim()){let t=m(e,eZ.length,Q);X(t),localStorage.setItem("orders-search-history",JSON.stringify(t))}},[eZ.length,Q]),(0,i.useCallback)(e=>{I(e.text),er(!1)},[]),(0,i.useCallback)(()=>{localStorage.removeItem("orders-search-history"),X([])},[]),(0,i.useCallback)(e=>{B(e)},[]);let e3=(0,i.useCallback)((e,t)=>{eo(r=>({...r,[e]:t}))},[]),e4=(0,i.useCallback)(e=>{let t={id:Date.now().toString(),...e};eh(e=>[...e,t])},[]);(0,i.useCallback)((e,t)=>{ei(r=>({...r,[e]:t}))},[]),(0,i.useCallback)(()=>{I(""),B([]),eo({orderNumber:"",customerName:"",status:[],fulfillmentStatus:[],financialStatus:[],channel:[],deliveryMethod:[],tags:[],total:"",createdAt:"",updatedAt:""}),ei({orderStatus:[],priceRange:{min:"",max:""},dateRange:{start:"",end:""},tags:[],channels:[]}),eh([]),_("all")},[]);let e6=(0,i.useCallback)(()=>{I(""),B([])},[]);(0,i.useCallback)(()=>{eo({orderNumber:"",customerName:"",status:[],fulfillmentStatus:[],financialStatus:[],channel:[],deliveryMethod:[],tags:[],total:"",createdAt:"",updatedAt:""})},[]),(0,i.useCallback)(()=>{eh([])},[]),(0,i.useCallback)(()=>{ei({orderStatus:[],priceRange:{min:"",max:""},dateRange:{start:"",end:""},tags:[],channels:[]})},[]);let e8=[{key:"orderNumber",label:"Order",sortable:!0,render:e=>(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["#",e.orderNumber]}),e.hasWarning&&(0,s.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xs text-white",children:"!"})}),e.hasDocument&&(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xs text-white",children:"D"})})]})},{key:"customerName",label:"Customer",sortable:!0,render:e=>(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.customerName})},{key:"fulfillmentStatus",label:"Fulfillment Status",sortable:!0,render:e=>{let t=(e=>{switch(e){case"fulfilled":return{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",text:"Fulfilled"};case"unfulfilled":return{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",text:"Unfulfilled"};case"partial":return{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",text:"Partial"};default:return{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",text:e}}})(e.fulfillmentStatus);return(0,s.jsx)("span",{className:t.className,children:t.text})}},{key:"total",label:"Total",sortable:!0,render:e=>(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["₹",(e.total||0).toFixed(2)]})},{key:"createdAt",label:"Date",sortable:!0,render:e=>(0,s.jsx)("span",{className:"text-sm text-gray-500",children:e.createdAt?new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}):"No date"})},{key:"items",label:"Items",sortable:!0,render:e=>{var t;return(0,s.jsxs)("span",{className:"text-sm text-gray-900",children:[(null===(t=e.items)||void 0===t?void 0:t.length)||0," items"]})}},{key:"deliveryStatus",label:"Delivery Status",sortable:!0,render:e=>(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.deliveryStatus||"Pending"})},{key:"tags",label:"Tags",sortable:!1,render:e=>{var t;return(0,s.jsxs)("div",{className:"flex flex-wrap gap-0.5",children:[null===(t=e.tags)||void 0===t?void 0:t.slice(0,2).map((e,t)=>(0,s.jsx)("span",{className:"px-1 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:e},t)),e.tags&&e.tags.length>2&&(0,s.jsxs)("span",{className:"px-1 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:["+",e.tags.length-2]})]})}},{key:"channel",label:"Channel",sortable:!0,render:e=>(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.channel})},{key:"deliveryMethod",label:"Delivery Method",sortable:!0,render:e=>(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.deliveryMethod})},{key:"financialStatus",label:"Payment Status",sortable:!0,render:e=>{let t=(e=>{switch(e){case"paid":return{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",text:"Paid"};case"pending":return{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",text:"Pending"};case"refunded":return{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",text:"Refunded"};default:return{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",text:e}}})(e.financialStatus);return(0,s.jsx)("span",{className:t.className,children:t.text})}}];return p&&0===a.length?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-gray-500",children:"Loading orders..."})}):S?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-red-600 text-lg font-semibold mb-2",children:"Error Loading Orders"}),(0,s.jsx)("div",{className:"text-gray-600 mb-4",children:S}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Retry"})]})}):(0,s.jsxs)("div",{className:(0,o.cn)("min-h-screen bg-gray-50",eR&&"fixed inset-0 z-50 bg-white"),children:[(0,s.jsx)("div",{className:"px-6 py-6",children:(0,s.jsx)(y,{kpiMetrics:eX,orders:eZ})}),(0,s.jsx)("div",{className:"px-6 pb-4",children:(0,s.jsx)(C.Z,{searchQuery:F,setSearchQuery:I,searchConditions:V,showSearchBuilder:U,setShowSearchBuilder:q,showAdditionalControls:eb,setShowAdditionalControls:ey,activeFilter:E,setActiveFilter:_,customFilters:em,onAddCustomFilter:e4,onRemoveCustomFilter:e=>eh(t=>t.filter(t=>t.id!==e)),showCustomFilterDropdown:eu,setShowCustomFilterDropdown:eg,hiddenDefaultFilters:ex,onShowAllFilters:()=>ef(new Set),onClearSearch:e6,onClearSearchConditions:()=>B([]),selectedProducts:W,onBulkEdit:()=>eA(!0),onExportSelected:()=>eC(!0),onBulkDelete:()=>eT(!0),currentProducts:eQ,onSelectAll:e1,activeColumnFilter:ed,columnFilters:en,onFilterClick:ec,onColumnFilterChange:e3,getUniqueValues:e0,onExport:()=>eC(!0),onImport:()=>eE(!0),onPrint:()=>e_(!0),onSettings:()=>eI(!0),showHeaderDropdown:eS,setShowHeaderDropdown:eN,viewMode:ev,setViewMode:ep,showAdvancedFilter:el,setShowAdvancedFilter:ea,isFullScreen:eR,onToggleFullScreen:()=>eL(!eR),isAlgoliaSearching:G,useAlgoliaSearch:Y})}),W.length>0&&(0,s.jsx)(O.Z,{selectedProducts:W,totalProducts:eZ.length,onBulkEdit:()=>eA(!0),onExportSelected:()=>eC(!0),onBulkDelete:()=>eT(!0)}),(0,s.jsxs)("div",{className:"px-6 pb-6",children:[S&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("div",{className:"text-yellow-800 text-sm",children:[(0,s.jsx)("strong",{children:"Note:"})," ",S," Using fallback data for demonstration."]})})}),"table"===ev?(0,s.jsx)(N,{currentOrders:eQ,selectedItems:W,onSelectItem:e$,onSelectAll:e1,columns:e8,loading:p,error:S,searchQuery:F,isFullScreen:eR,activeColumnFilter:ed,columnFilters:en,onFilterClick:ec,onColumnFilterChange:e3,getUniqueValues:e0,showImages:!1}):(0,s.jsx)(j,{data:eQ,columns:e8,selectedItems:W,onSelectItem:e$,viewMode:ev,cardsPerRow:eW,onCardsPerRowChange:ez,loading:p,error:S,searchQuery:F,isFullScreen:eR}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(k.Z,{currentPage:eV,totalPages:eY,itemsPerPage:eU,totalItems:eZ.length,onPageChange:e2,onItemsPerPageChange:e5})})]}),ek&&(0,s.jsx)(A.Z,{isOpen:ek,onClose:()=>eC(!1),products:eZ,selectedProducts:W}),eO&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Bulk Edit Orders"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-4",children:["Edit ",W.length," selected orders"]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)("button",{onClick:()=>eA(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>eA(!1),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save Changes"})]})]})}),eD&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Orders"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-4",children:["Are you sure you want to delete ",W.length," orders? This action cannot be undone."]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)("button",{onClick:()=>eT(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{z([]),eT(!1)},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]})})]})}function F(){return(0,s.jsx)("div",{className:"h-full",children:(0,s.jsx)(_,{})})}}},function(e){e.O(0,[883,554,35,342,971,117,744],function(){return e(e.s=30594)}),_N_E=e.O()}]);